---
title: "L3_Cours 1_stat"
author: "Florian Bayer"
output:
  xaringan::moon_reader:
    lib_dir: assets
    chakra: assets/libs/remark-latest.min.js
    css: [
    "./assets/css/theme_flo.css",
    "./assets/css/mtheme.css",
    "./assets/css/fonts_mtheme.css",
    "./assets/css/animate.css",
    "./assets/css/tools.css",
    "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
    seal: false

---
```{r setup, global_options,include=FALSE}
knitr::opts_chunk$set(
  dpi = 200,
  strip.white = T,
  message = FALSE,
  comment = NA,
  echo = FALSE,
  warning = FALSE,
  eval = TRUE
  
)
```

```{r include=FALSE}
source('./assets/functions.R')

requiredPackages = c('knitr','png','grid','gridExtra',
                     'RColorBrewer','dotenv')

PackageFacile(requiredPackages)

load_dot_env(".env")
annee = Sys.getenv("annee")

```



class: center, middle, inverse, title-slide, animated, fadeIn
# Analyse des données Licence Pro `r annee`
# TD n°3- La discrétisation en cartographie<br /> <br />
### Florian Bayer

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Organisation du TD 3 - Groupes de travail
<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

**Première partie** : Découverte individuelle de Magrit et création d'une première carte.

**Deuxième partie** : Travail en groupe sur l'impact des méthodes de discrétisation avec **présentation PowerPoint** de 5 minutes par groupe.

**Objectifs pédagogiques** :
- Maîtriser les outils de cartographie numérique (Magrit)
- Comprendre l'impact des choix de discrétisation sur le message cartographique
- Développer l'argumentation scientifique et la présentation orale

---
class: animated, fadeIn
## Objectif du TD 3
<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

Les objectifs de ce TD sont de mettre en application les acquis du cours 3 sur la discrétisation en cartographie

Vous apprendrez à utiliser un outil d'analyse de cartographie : Magrit

---
class: animated, fadeIn
## Magrit : présentation

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

Magrit est un logiciel de cartographie en ligne.

Il permet de créer facilement des cartes, de les discrétiser et même de les mettre en page.

Il est accessible directement via https://magrit.cnrs.fr/app/

Vous pouvez aussi le déployer sur votre serveur avec Docker

---
class: animated, fadeIn
## Magrit : présentation

La vue principale de Magrit est composée d'une zone d'affichage pour la carte et d'une barre d'outils

.center-img[
```{r echo=FALSE, out.width="100%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_main.png")
```
]


<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Magrit : charger le fond de carte

Il faut charger dans un premier temps le fond de carte :
- Cliquez sur *Ouvrir la fenêtre d'import des données*
- Chargez le fichier **monde_iso3.geojson**
- Cliquez sur *Zoomer sur la couche*
- Ne **cliquez pas** encore sur *Importer le jeu de données*

.center-img[
```{r echo=FALSE, out.width="80%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_fond.png")
```
]

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>


---
class: animated, fadeIn
## Magrit : charger les données

Le fond de carte ne contient pas les données que vous allez cartographier. Pour cela, il faut charger le fichier Excel du TD2 sur le niveau de vie des pays du Monde
- Cliquez sur *Ouvrir*
- Chargez le fichier **hdi-edu.csv**. Évitez de prendre le fichier XLSX, Magrit reconnaît mal les fichiers Excel.
- **Cliquez**  sur *Importer les 2 jeux de données*

.center-img[
```{r echo=FALSE, out.width="80%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_fonddata.png")
```
]

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Magrit : fond et données

Vous devriez voir votre fond de carte et **monde_iso3** et **hdi-edu** dans *Gestion des couches*


.center-img[
```{r echo=FALSE, out.width="100%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_maindata.png")
```
]

Cependant, Magrit ne fait pas encore le lien entre les deux. Pour cela, il faut faire une **jointure** entre le fond de carte et les données.

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Magrit : jointure
.font80[
En base de données, une jointure permet de lier le contenu d'au moins deux tables. Ici un fond de carte (une table avec des informations vectorielles) et un tableau.

Cliquez sur le symbole de jointure à côté de **hdi-edu** dans *Gestion des couches*. Pour faire la jointure, il faut des champs avec des données communes aux deux tables. Dans notre cas, le champ ISO_A3 présent sur le fond de carte et les données. Confirmez la jointure
]

.center-img[
```{r echo=FALSE, out.width="70%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_jointure.png")
```
]

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Magrit : carte choroplèthe

Vous allez maintenant créer une carte choroplèthe.
- Cliquez sur la cible à côté de la couche monde_iso3.
- Dans la nouvelle fenêtre, choisissez *Choroplèthe*.
- Dans variable, choisissez **taux_fertilite**
- Enfin, dans Discrétisation, cliquez sur la discrétisation manuelle <i class="fa-solid fa-gear"></i>


.center-img[
```{r echo=FALSE, out.width="70%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_chorovar.png")
```
]


<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

---
class: animated, fadeIn
## Magrit : discrétisation

.pull-left[Dans la nouvelle fenêtre, des informations sur la distribution s'affichent.

L'objectif de notre carte sera de découvrir la répartition spatiale de l'espérance de vie dans les pays du Monde.

Choisissez la méthode qui vous paraît la plus pertinente en fonction du contexte et de la distribution statistique.

**Justifiez votre choix par écrit**

**Confirmer** puis **Créer la couche**
]

.pull-right[.center-img[
```{r echo=FALSE, out.width="100%"}
knitr::include_graphics("./assets/images/TD/TD3_magrit_discret.png")
```
]]

Utilisez les éléments de l'onglet *Mise en page et éléments d'habillage* pour faire la mise en page de votre carte. Elle sera corrigé avec l'enseignant.


<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>


---
class: inverse, center, middle, animated, fadeIn
# 2- Exercice comparatif en groupes

<img src="./assets/css/graticules.png" STYLE="position:absolute; BOTTOM:30px; RIGHT:0px; WIDTH:150%;"/>
<div class="my-footer-title "></div>

---
class: animated, fadeIn
## Mise en situation professionnelle

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

**Commanditaire** : Organisation Mondiale de la Santé (OMS) 

**Contexte** : Préparation du rapport annuel "Inégalités de santé dans le monde"

**Demande** : Produire une cartographie de l'espérance de vie mondiale pour sensibiliser les décideurs politiques aux inégalités de santé.

**Public cible** :
- Ministres de la Santé européens

**Votre mission** : En tant que bureau d'études en géomatique, vous devez conseiller l'OMS sur la meilleure méthode de discrétisation pour atteindre cet objectif de communication.


---
class: animated, fadeIn
## Discrétisation : le choix cornélien !

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

**Objectif** : comprendre l'impact des différentes méthodes de discrétisation sur la représentation cartographique et le message transmis.

Dans le cadre de la commande OMS, **chaque groupe** doit produire **une carte choroplèthe** de la variable **esperance_vie** avec une méthode différente.

L'idée est de **comparer les résultats** pour conseiller au mieux l'OMS sur la méthode la plus adaptée à leur objectif de communication.

Vos **6 groupes de 4** se répartiront les méthodes de discrétisation suivantes :

- **Groupe 1** : Quantiles 
- **Groupe 2** : Moyenne et écart-type 
- **Groupe 3** : Q6 
- **Groupe 4** : Amplitudes égales
- **Groupe 5** : Seuils naturels 
- **Groupe 6** : Seuils naturels 

---
class: animated, fadeIn
## Rendu comparatif des groupes

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

Chaque groupe devra **présenter sa carte via PowerPoint** en 5 minutes et :

**1. Présenter sa méthode de discrétisation** :
- Expliquez le principe de la méthode
- Justifiez vos choix

**2. Défendre votre carte** :
- Argumentez : pourquoi votre méthode est-elle pertinente pour l'espérance de vie ?
- Quels pays sont mis en valeur ou "cachés" par votre discrétisation ?

**3. Critique constructive** : Après chaque présentation, les autres groupes peuvent poser une question critique.

**Support** : Préparez 2 à 4 slides PowerPoint 

---
class: animated, fadeIn
## Débriefing : quelle méthode choisir ?

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>

**Questions collectives** :
- Quelle carte vous semble la plus "juste" ? Pourquoi ?
- Y a-t-il des pays qui changent complètement de classe selon la méthode ?
- Quelle méthode met le mieux en évidence les inégalités mondiales ?

**Synthèse pédagogique** :
- **Il n'y a pas de "bonne" discrétisation universelle** → tout dépend de l'objectif cartographique
- **La forme de la distribution guide le choix** → une distribution normale suggère d'autres méthodes qu'une distribution asymétrique
- **La discrétisation est un acte de communication** → elle oriente la lecture et l'interprétation
- **Transparence méthodologique** → toujours justifier et mentionner sa méthode de discrétisation

Cet exercice vous prépare à être des cartographes critiques et responsables !

---
class: animated, fadeIn
## Fin du TD3

Magrit est un outil de cartographie très puissant et relativement simple à utiliser. Il est à privilégier pour produire vos cartes. Cependant, pour un meilleur rendu, il faut souvent exporter la carte et l'améliorer dans Inkscape ou Illustrator.

Dans ce TD, vous avez appris :
- A charger des données dans Magrit
- A faire une jointure
- A créer une carte choroplèthe dans Magrit
- A la discrétiser
- A la mettre en page 

Dans le prochain cours, nous verrons ensemble comment mesurer les liens entre deux données quantitatives.

<div class="my-footer"><span>ENSG - Licence Pro `r annee` : analyse de données - Florian Bayer</span></div>



